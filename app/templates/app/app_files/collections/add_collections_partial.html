{% load common_components %}
{% loader_component %}

<div class="row">
    <div class="col-lg-12" style="padding:0px">
        <div class="card">              
            <div class="card-header">
                <h4>ADD PARTIAL COLLECTION LIST                
                    <button class="btn button button-green pull-right" data-toggle="modal" data-target="#add_partial">New Entry</button>
                    <a href="" class="btn button button-black" style="float:right; color:#FFFFFF; margin-right:10px">Create Invoice</a>
                </h4>   
            </div>
            <div class="card-body">
                <div class="table">
                    <table class="table-bordered" width="100%" cellspacing="0" style="color:#000000">
                        <thead>
                            <th>Contact Name</th>
                            <th>Amount</th>
                            <th>Payment Type</th>
                            <th>Status</th>
                            <th>Due Date</th>
                            <th>Collected On Date</th>
                            <th>Created On Date</th>               
                            <th>Action</th>                
                        </thead>
                        <tbody>
                            {% for record in collections %}
                                <tr
                                    {% if record.payment_type == 1 %}
                                        style="background-color:#ffa50069"
                                    {% elif record.payment_type == 2 %}    
                                        style="background-color:rgba(12, 235, 19, 0.5)"
                                    {% else %}
                                        style="background-color:rgba(125, 205, 241, 0.5)"
                                    {% endif %}
                                >
                                    <td>{{record.contact.contact_name}}</td>
                                    <td>{{record.amount|safe}}</td>
                                    <td>{{record.get_payment_type_display|upper}}</td>
                                    <td>{{record.get_collection_status_display|upper}}</td>
                                    <td>{{record.collection_due_date}}</td>
                                    <td>{{record.collection_date}}</td>
                                    <td>{{record.created_on}}</td>                      
                                    <td>
                                        <a href="" class="btn btn-primary btn-sm" title="Edit Collection">
                                            <i class="fas fas-fw fa-pencil-alt"></i>
                                        </a>
                                    </td>                 
                                </tr>
                            {% endfor %}
                            {% for record in partial_collections %}
                                <tr
                                    {% if record.payment_type == 1 %}
                                        style="background-color:#ffa50069"
                                    {% elif record.payment_type == 2 %}    
                                        style="background-color:rgba(12, 235, 19, 0.5)"
                                    {% else %}
                                        style="background-color:rgba(125, 205, 241, 0.5)"
                                    {% endif %}
                                >
                                    <td class="text-center"> -- </td>
                                    <td>{{record.amount|safe}}</td>
                                    <td>{{record.get_payment_type_display|upper}}</td>
                                    <td>{{record.get_collection_status_display|upper}}</td>
                                    <td>{{record.collection_due_date}}</td>
                                    <td>{{record.collection_date}}</td>
                                    <td>{{record.created_on}}</td>                      
                                    <td>
                                        <a href="" class="btn btn-primary btn-sm" title="Edit Collection">
                                            <i class="fas fas-fw fa-pencil-alt"></i>
                                        </a>
                                    </td>                 
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="add_partial" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form method="post">
                <div class="modal-header">
                    <h5 class="modal-title">Add Partial Collection</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {% csrf_token %}
                    <div class="table" style="padding:10px 0px;">
                        <div class="d-table-row" style="padding:10px 0px;">
                            <div class="d-table-cell" style="padding:5px 10px;">
                                <label>Amount</label>
                            </div>
                            <div class="d-table-cell" style="padding:0px 13px;">
                                {{collection_form.amount}}
                            </div>                        
                        </div>
                        <div class="d-table-row" style="padding:10px 0px;">
                            <div class="d-table-cell" style="padding:5px 10px;">
                                <label>Due Date</label>
                            </div>
                            <div class="d-table-cell" style="padding:0px 13px;">
                                {{collection_form.collection_due_date}}
                            </div>                        
                        </div>
                        <div class="d-table-row" style="padding:10px 0px;">
                            <div class="d-table-cell" style="padding:5px 10px;">
                                <label>Mode Of Payment</label>
                            </div>
                            <div class="d-table-cell" style="padding:0px 13px;">
                                {{collection_form.payment_type}}
                            </div>                        
                        </div>
                        <div class="d-table-row" style="padding:10px 0px;">
                            <div class="d-table-cell" style="padding:5px 10px;">
                                <label>Status</label>
                            </div>
                            <div class="d-table-cell" style="padding:0px 13px;">
                                {{collection_form.collection_status}}
                            </div>                        
                        </div>
                        <div class="d-table-row" style="padding:10px 0px;">
                            <div class="d-table-cell" style="padding:5px 10px;">
                                <label>Collection Date</label>
                            </div>
                            <div class="d-table-cell" style="padding:0px 13px;">
                                {{collection_form.collection_date}}
                            </div>                        
                        </div>
                    </div>      
                </div>
                <div class="modal-footer">
                    <button class="btn button button-green">Save changes</button>
                    <button type="button" class="btn button-orange" data-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>
  </div>